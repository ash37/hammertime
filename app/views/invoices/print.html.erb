<div class="space-y-8 print:space-y-6">
  <div class="flex flex-wrap items-start justify-between gap-6">
    <div>
      <h1 class="text-2xl font-semibold text-slate-900 print:text-black">Invoice ##<%= @invoice.invoice_number %></h1>
      <p class="mt-2 text-sm text-slate-500 print:text-black"><%= @invoice.customer.name %></p>
      <% if @invoice.job %>
        <p class="text-sm text-slate-500 print:text-black">Job: <%= @invoice.job.title %></p>
      <% end %>
    </div>
    <div class="text-right text-sm text-slate-500 print:text-black">
      <p>Issued: <%= @invoice.issued_on.strftime("%d %b %Y") %></p>
      <p>Due: <%= @invoice.due_on.strftime("%d %b %Y") %></p>
      <p>Status: <%= @invoice.status.titleize %></p>
    </div>
  </div>

  <div class="grid gap-6 md:grid-cols-2">
    <div class="rounded-xl border border-slate-200 bg-slate-50 p-4 text-sm text-slate-600 print:bg-white print:text-black">
      <p class="text-xs font-semibold uppercase tracking-wide text-slate-400 print:text-black">Business</p>
      <p class="mt-2 text-base font-semibold text-slate-900 print:text-black"><%= @invoice.account.company_name %></p>
      
      <% if @invoice.account.abn.present? %>
        <p class="mt-2">ABN: <%= @invoice.account.abn %></p>
      <% end %>
      <p>GST Registered: <%= @invoice.account.gst_registered ? "Yes" : "No" %></p>
      <% if @invoice.account.company_licence_number.present? %>
        <p>Licence: <%= @invoice.account.company_licence_number %></p>
      <% end %>
    </div>
    <div class="rounded-xl border border-slate-200 bg-slate-50 p-4 text-sm text-slate-600 print:bg-white print:text-black">
      <p class="text-xs font-semibold uppercase tracking-wide text-slate-400 print:text-black">Bill to</p>
      <p class="mt-2 text-base font-semibold text-slate-900 print:text-black"><%= @invoice.customer.name %></p>
      <p class="mt-1 whitespace-pre-line"><%= @invoice.customer.billing_address.presence || "Address on file" %></p>
    </div>
  </div>

  <div class="overflow-hidden rounded-xl border border-slate-200">
    <table class="min-w-full divide-y divide-slate-100 text-sm">
      <thead class="bg-slate-50 text-xs uppercase tracking-wide text-slate-400 print:bg-white print:text-black">
        <tr>
          <th class="px-4 py-3 text-left">Item</th>
          <th class="px-4 py-3 text-right">Qty</th>
          <th class="px-4 py-3 text-right">Unit</th>
          <th class="px-4 py-3 text-right">Total</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-slate-100 text-slate-700 print:text-black">
        <% @line_items.each do |item| %>
          <tr>
            <td class="px-4 py-3">
              <p class="font-medium"><%= item.description %></p>
              <p class="text-xs text-slate-400 print:text-black"><%= item.item_type.titleize %></p>
            </td>
            <td class="px-4 py-3 text-right"><%= item.quantity.to_f %></td>
            <td class="px-4 py-3 text-right"><%= number_to_currency(item.unit_price_cents / 100.0) %></td>
            <td class="px-4 py-3 text-right font-semibold"><%= number_to_currency(item.total_cents / 100.0) %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>

  <div class="flex justify-end">
    <div class="w-full max-w-sm rounded-xl border border-slate-200 bg-slate-50 p-4 text-sm text-slate-600 print:bg-white print:text-black">
      <div class="flex items-center justify-between">
        <span>Subtotal</span>
        <span class="font-semibold"><%= number_to_currency(@invoice.subtotal_cents / 100.0) %></span>
      </div>
      <div class="mt-2 flex items-center justify-between border-t border-slate-200 pt-2">
        <span>Total</span>
        <span class="text-lg font-semibold"><%= number_to_currency(@invoice.total_cents / 100.0) %></span>
      </div>
    </div>
  </div>
</div>
