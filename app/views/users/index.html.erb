<% content_for :page_title, "Users" %>

<div class="space-y-6">
  <div class="flex items-center justify-between">
    <div>
      <p class="text-sm text-slate-500">Manage team access and billing rates.</p>
    </div>
    <%= link_to "New user", new_user_path, class: "rounded-xl bg-slate-900 px-4 py-2 text-sm font-semibold text-white hover:bg-slate-800" %>
  </div>

  <div class="rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
    <div class="overflow-hidden rounded-xl border border-slate-100">
      <table class="min-w-full divide-y divide-slate-100 text-sm">
        <thead class="bg-slate-50 text-xs uppercase tracking-wide text-slate-400">
          <tr>
            <th class="px-4 py-3 text-left">Name</th>
            <th class="px-4 py-3 text-left">Email</th>
            <th class="px-4 py-3 text-left">Mobile</th>
            <th class="px-4 py-3 text-right">Billing Rate</th>
            <th class="px-4 py-3 text-right">Hourly Cost</th>
            <th class="px-4 py-3 text-left">Role</th>
            <th class="px-4 py-3 text-right">Status</th>
            <th class="px-4 py-3 text-right">Actions</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-slate-100 text-slate-600">
          <% @users.each do |user| %>
            <tr>
              <td class="px-4 py-3 text-slate-900"><%= user.display_name %></td>
              <td class="px-4 py-3"><%= user.email %></td>
              <td class="px-4 py-3"><%= user.mobile.presence || "â€”" %></td>
              <td class="px-4 py-3 text-right"><%= number_to_currency(user.default_billing_rate_cents / 100.0) %></td>
              <td class="px-4 py-3 text-right"><%= number_to_currency(user.hourly_cost_cents / 100.0) %></td>
              <td class="px-4 py-3"><%= user.role.titleize %></td>
              <td class="px-4 py-3 text-right">
                <% if user.deactivated_at.present? %>
                  <span class="rounded-full bg-rose-100 px-2 py-1 text-xs font-semibold text-rose-700">Inactive</span>
                <% else %>
                  <span class="rounded-full bg-emerald-100 px-2 py-1 text-xs font-semibold text-emerald-700">Active</span>
                <% end %>
              </td>
              <td class="px-4 py-3 text-right">
                <%= link_to "View", user_path(user), class: "text-sm font-semibold text-slate-700 hover:text-slate-900" %>
              </td>
            </tr>
          <% end %>
          <% if @users.empty? %>
            <tr>
              <td class="px-4 py-6 text-center text-sm text-slate-500" colspan="8">No users yet.</td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
