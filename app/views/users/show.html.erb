<% content_for :page_title, @user.display_name %>

<div class="space-y-6">
  <div class="rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
    <div class="flex flex-wrap items-start justify-between gap-4">
      <div>
        <p class="text-xs font-semibold uppercase tracking-wide text-slate-400">User</p>
        <h2 class="mt-2 text-xl font-semibold text-slate-900"><%= @user.display_name %></h2>
        <p class="mt-1 text-sm text-slate-500"><%= @user.email %></p>
        <p class="mt-1 text-sm text-slate-500"><%= @user.mobile.presence || "â€”" %></p>
      </div>
      <div class="text-right">
        <span class="rounded-full px-3 py-1 text-xs font-semibold <%= @user.deactivated_at ? "bg-rose-100 text-rose-700" : "bg-emerald-100 text-emerald-700" %>">
          <%= @user.deactivated_at ? "Inactive" : "Active" %>
        </span>
        <p class="mt-2 text-xs uppercase tracking-wide text-slate-400"><%= @user.role.titleize %></p>
      </div>
    </div>
  </div>

  <div class="grid gap-6 md:grid-cols-2">
    <div class="rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
      <p class="text-sm font-semibold text-slate-900">Rates</p>
      <div class="mt-4 space-y-2 text-sm text-slate-600">
        <div class="flex items-center justify-between">
          <span>Default Billing Rate</span>
          <span class="font-semibold text-slate-900"><%= number_to_currency(@user.default_billing_rate_cents / 100.0) %></span>
        </div>
        <div class="flex items-center justify-between">
          <span>Hourly Cost</span>
          <span class="font-semibold text-slate-900"><%= number_to_currency(@user.hourly_cost_cents / 100.0) %></span>
        </div>
      </div>
    </div>

    <div class="rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
      <p class="text-sm font-semibold text-slate-900">Account</p>
      <p class="mt-4 text-sm text-slate-600"><%= @user.account.name %></p>
      <p class="mt-2 text-xs text-slate-500">Invited: <%= @user.invitation_sent_at ? l(@user.invitation_sent_at, format: :short) : "Not sent" %></p>
    </div>
  </div>

  <div class="rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
    <div class="flex flex-wrap items-center gap-3">
      <%= link_to "Edit", edit_user_path(@user), class: "rounded-xl border border-slate-200 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50" %>
      <%= button_to "Invite user", invite_user_path(@user), method: :post, class: "rounded-xl border border-slate-200 px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50" %>
      <% unless @user == current_user %>
        <%= button_to "Deactivate", deactivate_user_path(@user), method: :patch, class: "rounded-xl border border-rose-200 px-4 py-2 text-sm font-semibold text-rose-600 hover:bg-rose-50" %>
      <% end %>
    </div>
  </div>
</div>
