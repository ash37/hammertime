<% content_for :page_title, "Customers" %>

<div class="space-y-4">
  <div class="flex flex-wrap items-center gap-3">
    <%= link_to "New customer", new_customer_path, class: "rounded-xl bg-slate-900 px-4 py-2 text-sm font-semibold text-white hover:bg-slate-800" %>
    <div class="ml-auto flex items-center gap-2 text-sm text-slate-500">
      <%= link_to "Active", customers_path, class: "rounded-full px-3 py-1 #{params[:status] == 'archived' ? 'text-slate-400' : 'bg-slate-900 text-white'}" %>
      <%= link_to "Archived", customers_path(status: "archived"), class: "rounded-full px-3 py-1 #{params[:status] == 'archived' ? 'bg-slate-900 text-white' : 'text-slate-400'}" %>
    </div>
  </div>

  <div class="rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
    <div class="overflow-hidden rounded-xl border border-slate-100">
      <table class="min-w-full divide-y divide-slate-100 text-sm">
        <thead class="bg-slate-50 text-xs uppercase tracking-wide text-slate-400">
          <tr>
            <th class="px-4 py-3 text-left">Name</th>
            <th class="px-4 py-3 text-left">Email</th>
            <th class="px-4 py-3 text-left">Phone</th>
            <th class="px-4 py-3 text-left">Billing Address</th>
            <th class="px-4 py-3 text-right">Actions</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-slate-100 text-slate-600">
          <% @customers.each do |customer| %>
            <tr>
              <td class="px-4 py-3 text-slate-900"><%= customer.name %></td>
              <td class="px-4 py-3"><%= customer.email.presence || "—" %></td>
              <td class="px-4 py-3"><%= customer.phone.presence || "—" %></td>
              <td class="px-4 py-3">
                <span class="line-clamp-2"><%= customer.billing_address.presence || "—" %></span>
              </td>
              <td class="px-4 py-3 text-right space-x-3">
                <%= link_to "View", customer_path(customer), class: "text-sm font-semibold text-slate-700 hover:text-slate-900" %>
                <%= link_to "Edit", edit_customer_path(customer), class: "text-sm font-semibold text-slate-500 hover:text-slate-700" %>
              </td>
            </tr>
          <% end %>
          <% if @customers.empty? %>
            <tr>
              <td class="px-4 py-6 text-center text-sm text-slate-500" colspan="5">No customers yet.</td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
